<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>後台管理 - 儀表板</title>
<script src="/socket.io/socket.io.js"></script>

<link rel="stylesheet" href="/css/admin.css?v=11">

<link href="https://cdn.jsdelivr.net/npm/gridstack@9.5.1/dist/gridstack.min.css" rel="stylesheet"/>
<script src="https://cdn.jsdelivr.net/npm/gridstack@9.5.1/dist/gridstack-all.js"></script>
</head>
<body>

<div id="status-bar">連線中斷，正在嘗試重新連線...</div>

<div id="login-container">
<h1>後台管理登入 (v1 - 已停用)</h1>
<label for="password-input" class="sr-only">管理密碼</label>
<input type="password" id="password-input" placeholder="請輸入管理密碼" />
<button id="login-button" type="button">登入</button>
<p id="login-error"></p>
</div>

<div id="admin-panel" style="display:none;"> <h1>目前號碼：<span id="number">0</span></h1>

<div class="control-group button-row" id="main-number-controls">
<button id="prev" type="button" class="btn-warn">上一號</button>
<button id="next" type="button" class="btn-success">下一號</button>
</div>


<div class="grid-stack">

    <div class="grid-stack-item" id="card-control" gs-x="0" gs-y="0" gs-w="6" gs-h="5" gs-min-w="4" gs-min-h="5">
        <div class="grid-stack-item-content">
            <div class="admin-card">
                <h3><span class="card-icon">🕹️</span> 主要控制</h3>
                <div class="control-group sound-toggle-group">
                <label for="sound-toggle">啟用前台音效</label>
                <input type="checkbox" id="sound-toggle">
                </div>
                <div class="control-group">
                <label for="manualNumber">手動設定號碼</label>
                <input type="number" id="manualNumber" placeholder="輸入號碼" />
                <button id="setNumber" type="button" class="btn-primary">設定號碼</button>
                </div>
                <div class="control-group list-editor">
                <label>手動編輯過號列表</label>
                <ul id="passed-list-ui"></ul>
                <div class="input-group">
                    <label for="new-passed-number" class="sr-only">輸入過號號碼</label>
                    <input type="number" id="new-passed-number" placeholder="輸入號碼">
                    <button id="add-passed-btn" type="button" class="btn-add">+</button>
                </div>
                </div>
            </div>
        </div>
    </div> 

    <div class="grid-stack-item" id="card-editor" gs-x="6" gs-y="0" gs-w="6" gs-h="4" gs-min-w="4" gs-min-h="4">
        <div class="grid-stack-item-content">
            <div class="admin-card">
                <h3><span class="card-icon">📝</span> 列表編輯</h3>
                <div class="control-group list-editor">
                <label>編輯精選連結</label>
                <ul id="featured-list-ui"></ul>
                <div class="input-group">
                    <label for="new-link-text" class="sr-only">連結文字</label>
                    <input type="text" id="new-link-text" placeholder="連結文字">
                    <label for="new-link-url" class="sr-only">連結網址 (https://...)</label>
                    <input type="text" id="new-link-url" placeholder="https://... 網址">
                    <button id="add-featured-btn" type="button" class="btn-add">+</button>
                </div>
                </div>
            </div>
        </div>
    </div> 
    
    <div class="grid-stack-item" id="card-logs" gs-x="0" gs-y="5" gs-w="6" gs-h="3" gs-min-w="4" gs-min-h="3">
        <div class="grid-stack-item-content">
            <div class="admin-card">
                <h3><span class="card-icon">📋</span> 即時操作日誌</h3>
                <div class="control-group admin-log-container">
                <ul id="admin-log-ui">
                    <li>等待伺服器連線...</li>
                </ul>
                <button id="clear-log-btn" type="button" class="btn-clear-log">清除日誌</button>
                </div>
            </div>
        </div>
    </div> 

    <div class="grid-stack-item" id="card-settings" gs-x="6" gs-y="4" gs-w="6" gs-h="4" gs-min-w="4" gs-min-h="4">
        <div class="grid-stack-item-content">
            <div class="admin-card">
                <h3><span class="card-icon">⚙️</span> 系統設定</h3>
                <div class="control-group system-toggle-group">
                    <label for="public-toggle">對外開放前台</label>
                    <input type="checkbox" id="public-toggle">
                </div>
                
                <div class="control-group" style="border-top: 1px solid #eee; margin-top: 20px; padding-top: 10px;">
                    <label>儀表板控制</label>
                    <button id="toggle-layout-lock-btn" type="button" class="btn-warn">🔓 解鎖排版</button>
                    <button id="save-layout-btn" type="button" class="btn-secondary">💾 儲存儀表板排版</button>
                    <a href="/superadmin-panel.html" id="superadmin-link" class="btn-superadmin" style="display:none;">👑 管理用戶</a>
                </div>

                <div class="reset-zone">
                    <label>危險區域</label>
                    <div class="control-group button-row">
                        <button id="resetNumber" type="button" class="btn-reset-single">重置號碼</button>
                        <button id="resetFeaturedContents" type="button" class="btn-reset-single">重置精選連結</button>
                        <button id="resetPassed" type="button" class="btn-reset-single">重置過號列表</button>
                    </div>
                    <button id="resetAll" type="button" class="btn-danger">💥 重置所有 (點擊確認)</button>
                    <button id="resetAllConfirm" type="button" class="btn-danger-confirm" style="display:none;">⚠️ 點此確認重置 ⚠️</button>
                </div>

            </div>
        </div>
    </div> 

</div> 

</div> 

<div id="toast-notification"></div>

<script src="/js/admin.js?v=11"></script>
</body>
</html>
